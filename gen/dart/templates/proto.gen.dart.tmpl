{{- define "proto" -}}
import 'dart:async';
import 'dart:convert';
{{if .TargetOpts.Server}}
import 'dart:io';
{{end}}
import 'package:meta/meta.dart';
import 'package:freezed_annotation/freezed_annotation.dart';
{{if .TargetOpts.Client}}
import 'package:http/http.dart' as http show post, Request, Response;
{{if .TargetOpts.Extra | useFlutter}}
import 'package:flutter/foundation.dart';
{{end}}
{{if .TargetOpts.Extra | useFlutterBloc}}
import 'package:flutter/foundation.dart';
import 'package:bloc/bloc.dart';
{{end}}
{{if .TargetOpts.Extra | useAngularBloc}}
import 'package:bloc/bloc.dart';
{{end}}
{{end}}
{{if .TargetOpts.Server}}
import 'package:args/args.dart';
import 'package:shelf/shelf.dart' as shelf;
import 'package:shelf/shelf_io.dart' as io;
{{end}}

{{if .TargetOpts.PkgName}}
part '{{.TargetOpts.PkgName}}.freezed.dart';
part '{{.TargetOpts.PkgName}}.g.dart';
{{end}}

// {{.Name}} {{.SchemaVersion}} {{.SchemaHash}}
// --
// This file has been generated by https://github.com/webrpc/webrpc using gen/dart
// Do not edit by hand. Update your webrpc schema and re-generate.

// WebRPC description and code-gen version
String webRPCVersion()  {
  return "{{.WebRPCVersion}}";
}

// Schema version of your RIDL schema
String WebRPCSchemaVersion() {
  return "{{.SchemaVersion}}";
}

// Schema hash generated from your RIDL schema
String WebRPCSchemaHash() {
  return "{{.SchemaHash}}";
}

{{template "types" .}}

{{if .TargetOpts.Server}}
  {{template "server" .}}
  {{template "server_helpers" .}}
{{end -}}

{{if .TargetOpts.Client}}
  {{if .TargetOpts.Extra | useBloc}}
  {{template "bloc_helpers" .}}
  {{end}}
  {{template "client" .}}
{{end -}}

{{template "helpers" .}}

{{- end}}
