{{define "helpers"}}
export interface WebRPCError extends Error {
  code: string
  msg: string
	status: number
}

export const throwHTTPError = (resp: Response) => {
  return resp.json().then((err: WebRPCError) => { throw err })
}

export const throwHTTPError = (resp: Response) => {
  return resp.text().then(text => {
    try {
      const err = JSON.parse(text)

      throw err
    } catch (err) {
      throw new Error(text);
    }
  })
}

export type Fetch = (input: RequestInfo, init?: RequestInit) => Promise<Response>
{{end}}
