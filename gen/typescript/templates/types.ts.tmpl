{{define "types"}}

{{- if .Messages -}}
{{range .Messages -}}

{{if .Type | isEnum -}}
{{$enumName := .Name}}
export enum {{$enumName}} {
{{- range $i, $field := .Fields}}
  {{- if $i}},{{end}}
  {{$enumName}}_{{$field.Name}} = <{{$field.Type | fieldType}}>{{$field.Value}}
{{- end}}
}
export const {{$enumName}}_name = {
{{- range $i, $field := .Fields}}
  {{- if $i}},{{end}}
  '{{$field.Value}}': '{{$field.Name}}'
{{- end}}
}
{{end -}}

{{- if .Type | isStruct  }}
export interface {{.Name | interfaceName}} {
  {{range .Fields -}}
  {{. | exportedJSONField}}{{if .Optional}}?{{end}}: {{.Type | fieldType}}
  {{end -}}

  toJSON?(): object
}

export class {{.Name}} {
  private _data: object
  constructor(_data?: {{.Name | interfaceName}}) {
    this._data = {}
    if (_data) {
      {{range .Fields -}}
      this._data['{{. | exportedJSONField}}'] = _data['{{. | exportedJSONField}}']!
      {{end}}
    }
  }
  {{ range .Fields -}}
  public get {{.Name | exportedField}}(): {{.Type | fieldType}} {
    return this._data['{{. | exportedJSONField }}']!
  }
  public set {{.Name | exportedField}}(value: {{.Type | fieldType}}) {
    this._data['{{. | exportedJSONField}}'] = value
  }
  {{end}}
  public toJSON(): object {
    return this._data
  }
}
{{end -}}
{{end -}}
{{end -}}

{{if .Services}}
{{range .Services -}}
export interface {{.Name | serviceInterfaceName}} {
  {{range .Methods -}}
    {{.Name}}({{.Inputs | methodInputs}}): {{.Outputs | methodOutputs}}
  {{end}}
}
{{- end}}
{{end -}}

{{end}}
